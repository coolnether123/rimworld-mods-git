<?xml version="1.0" encoding="utf-8" ?>
<Patch>
  
  <Operation Class="PatchOperationFindMod">
    <mods>
      <li>Biotech</li>
    </mods>

    <match Class="PatchOperationFindMod">
    <mods>
      <li>Combat Extended</li>
    </mods>
    <match Class="PatchOperationAdd">
      <xpath>Defs</xpath>
	  <value>
	
  <ThingDef ParentName="ApparelNoQualityBase">
    <defName>VWE_Apparel_GrenadeToxicBelt</defName>
    <label>tox grenade belt</label>
    <description>Charge powered lethal gas canister causing toxic buildup over a very short period of time, strapped to a belt. Can be reloaded using tox grenades.</description>
    <techLevel>Spacer</techLevel>
    <comps>
      <li Class="CompProperties_Reloadable">
        <maxCharges>6</maxCharges>
        <ammoDef>Weapon_GrenadeTox</ammoDef>
        <ammoCountPerCharge>1</ammoCountPerCharge>
        <baseReloadTicks>60</baseReloadTicks>
        <soundReload>Standard_Reload</soundReload>
        <hotKey>Misc4</hotKey>
        <chargeNoun>gas</chargeNoun>
        <displayGizmoWhileUndrafted>false</displayGizmoWhileUndrafted>
      </li>
    </comps>
	<verbs>
		<li Class="CombatExtended.VerbPropertiesCE">
			<label>throw tox grenade</label>
			<verbClass>CombatExtended.Verb_LaunchProjectileStaticCE</verbClass>
			<hasStandardCommand>true</hasStandardCommand>
			<onlyManualCast>True</onlyManualCast>
			<warmupTime>1.8</warmupTime>
			<range>12</range>
			<ai_IsBuildingDestroyer>false</ai_IsBuildingDestroyer>
			<soundCast>ThrowGrenade</soundCast>
			<soundCastTail>GunTail_Medium</soundCastTail>
			<muzzleFlashScale>14</muzzleFlashScale>
			<drawHighlightWithLineOfSight>true</drawHighlightWithLineOfSight>
			<targetParams>
				<canTargetLocations>true</canTargetLocations>
			</targetParams>
			<ignorePartialLoSBlocker>true</ignorePartialLoSBlocker>
			<defaultProjectile>Proj_GrenadeTox</defaultProjectile>
			<rangedFireRulepack>Combat_RangedFire_Thrown</rangedFireRulepack>
		</li>
	</verbs>
    <recipeMaker>
      <unfinishedThingDef>UnfinishedPack</unfinishedThingDef>
	<researchPrerequisite>ToxGas</researchPrerequisite>
		<skillRequirements>
			<Crafting>7</Crafting>
		</skillRequirements>
		<recipeUsers>
				<li>FabricationBench</li>
		</recipeUsers>
      <useIngredientsForColor>false</useIngredientsForColor>
      <workSpeedStat>GeneralLaborSpeed</workSpeedStat>
      <workSkill>Crafting</workSkill>
      <effectWorking>Smith</effectWorking>
      <soundWorking>Recipe_Smith</soundWorking>
    </recipeMaker>
    <costList>
      <Weapon_GrenadeTox>1</Weapon_GrenadeTox>
    </costList>
    <graphicData>
      <texPath>Things/Item/BeltGrenades/GasGrenadeBelt</texPath>
      <graphicClass>Graphic_Single</graphicClass>
    </graphicData>
    <tickerType>Normal</tickerType>
    <statBases>
      <WorkToMake>500</WorkToMake>
      <Mass>3</Mass>
      <Flammability>0.4</Flammability>
      <EquipDelay>2</EquipDelay>
    </statBases>
    <thingCategories>
      <li>ApparelUtility</li>
    </thingCategories>
    <generateAllowChance>0.15</generateAllowChance>
    <apparel>
	<wornGraphicPath>Things/Pawn/Humanlike/Apparel/GasGrenadeBelt/GasGrenadeBelt</wornGraphicPath>
      <wornGraphicData>
        <renderUtilityAsPack>true</renderUtilityAsPack>
        <north>
          <offset>(-0.30,-0.25)</offset>
		  <hulk><offset>(-0.0,-0.15)</offset></hulk>
		  <fat><offset>(-0.0,-0.0)</offset></fat>
		  <thin><offset>(0.10,-0.0)</offset></thin>
        </north>
        <south>
          <offset>(0.25,-0.20)</offset>
		  <hulk><offset>(-0.0,-0.10)</offset></hulk>
		  <fat><offset>(-0.0,-0.0)</offset></fat>
		  <thin><offset>(-0.10,-0.0)</offset></thin>
        </south>
        <east>
          <offset>(-0.15,-0.25)</offset>
		  <hulk><offset>(-0.0,-0.15)</offset></hulk>
		  <fat><offset>(-0.10,-0.10)</offset></fat>
        </east>
        <west>
          <offset>(0.15,-0.25)</offset>
		  <hulk><offset>(-0.0,-0.15)</offset></hulk>
		  <fat><offset>(-0.0,-0.10)</offset></fat>
        </west>
        <male>  <scale>(0.75,0.75)</scale></male>
        <female><scale>(0.75,0.75)</scale></female>
        <thin>  <scale>(0.7,0.7)</scale></thin>
        <hulk>  <scale>(0.9,0.9)</scale></hulk>
        <fat>   <scale>(0.9,0.9)</scale></fat>

      </wornGraphicData>
      <careIfWornByCorpse>false</careIfWornByCorpse>
      <careIfDamaged>false</careIfDamaged>
      <wearPerDay>0</wearPerDay>
      <bodyPartGroups>
        <li>Waist</li>
      </bodyPartGroups>
      <layers>
        <li>Belt</li>
      </layers>
      <tags>
        <li>GrenadeNonDestructiveBelt</li>
      </tags>
    </apparel>
  </ThingDef>

	</value>
	</match>
	
    <nomatch Class="PatchOperationAdd">
      <xpath>Defs</xpath>

      <value>
	  
 <ThingDef ParentName="ApparelNoQualityBase">
    <defName>VWE_Apparel_GrenadeToxicBelt</defName>
    <label>tox grenade belt</label>
    <description>Charge powered lethal gas canister causing toxic buildup over a very short period of time, strapped to a belt. Can be reloaded using tox grenades.</description>
    <techLevel>Spacer</techLevel>
    <comps>
      <li Class="CompProperties_Reloadable">
        <maxCharges>6</maxCharges>
        <ammoDef>Weapon_GrenadeTox</ammoDef>
        <ammoCountPerCharge>1</ammoCountPerCharge>
        <baseReloadTicks>60</baseReloadTicks>
        <soundReload>Standard_Reload</soundReload>
        <hotKey>Misc4</hotKey>
        <chargeNoun>gas</chargeNoun>
        <displayGizmoWhileUndrafted>false</displayGizmoWhileUndrafted>
      </li>
    </comps>
    <verbs>
      <li>
        <label>throw tox grenade</label>
        <verbClass>Verb_LaunchProjectileStatic</verbClass>
        <hasStandardCommand>true</hasStandardCommand>
        <onlyManualCast>True</onlyManualCast>
        <range>12.9</range>
        <forcedMissRadius>1.9</forcedMissRadius>
        <warmupTime>1.5</warmupTime>
        <noiseRadius>4</noiseRadius>
        <ai_IsBuildingDestroyer>false</ai_IsBuildingDestroyer>
        <soundCast>ThrowGrenade</soundCast>
        <drawHighlightWithLineOfSight>true</drawHighlightWithLineOfSight>
        <targetParams>
          <canTargetLocations>true</canTargetLocations>
        </targetParams>
        <defaultProjectile>Proj_GrenadeTox</defaultProjectile>
        <rangedFireRulepack>Combat_RangedFire_Thrown</rangedFireRulepack>
      </li>
    </verbs>
    <recipeMaker>
      <unfinishedThingDef>UnfinishedPack</unfinishedThingDef>
	<researchPrerequisite>ToxGas</researchPrerequisite>
		<skillRequirements>
			<Crafting>7</Crafting>
		</skillRequirements>
		<recipeUsers>
				<li>FabricationBench</li>
		</recipeUsers>
      <useIngredientsForColor>false</useIngredientsForColor>
      <workSpeedStat>GeneralLaborSpeed</workSpeedStat>
      <workSkill>Crafting</workSkill>
      <effectWorking>Smith</effectWorking>
      <soundWorking>Recipe_Smith</soundWorking>
    </recipeMaker>
    <costList>
      <Weapon_GrenadeTox>1</Weapon_GrenadeTox>
    </costList>
    <graphicData>
      <texPath>Things/Item/BeltGrenades/GasGrenadeBelt</texPath>
      <graphicClass>Graphic_Single</graphicClass>
    </graphicData>
    <tickerType>Normal</tickerType>
    <statBases>
      <WorkToMake>500</WorkToMake>
      <Mass>3</Mass>
      <Flammability>0.4</Flammability>
      <EquipDelay>2</EquipDelay>
    </statBases>
    <thingCategories>
      <li>ApparelUtility</li>
    </thingCategories>
    <generateAllowChance>0.15</generateAllowChance>
    <apparel>
	<wornGraphicPath>Things/Pawn/Humanlike/Apparel/GasGrenadeBelt/GasGrenadeBelt</wornGraphicPath>
      <wornGraphicData>
        <renderUtilityAsPack>true</renderUtilityAsPack>
        <north>
          <offset>(-0.30,-0.25)</offset>
		  <hulk><offset>(-0.0,-0.15)</offset></hulk>
		  <fat><offset>(-0.0,-0.0)</offset></fat>
		  <thin><offset>(0.10,-0.0)</offset></thin>
        </north>
        <south>
          <offset>(0.25,-0.20)</offset>
		  <hulk><offset>(-0.0,-0.10)</offset></hulk>
		  <fat><offset>(-0.0,-0.0)</offset></fat>
		  <thin><offset>(-0.10,-0.0)</offset></thin>
        </south>
        <east>
          <offset>(-0.15,-0.25)</offset>
		  <hulk><offset>(-0.0,-0.15)</offset></hulk>
		  <fat><offset>(-0.10,-0.10)</offset></fat>
        </east>
        <west>
          <offset>(0.15,-0.25)</offset>
		  <hulk><offset>(-0.0,-0.15)</offset></hulk>
		  <fat><offset>(-0.0,-0.10)</offset></fat>
        </west>
        <male>  <scale>(0.75,0.75)</scale></male>
        <female><scale>(0.75,0.75)</scale></female>
        <thin>  <scale>(0.7,0.7)</scale></thin>
        <hulk>  <scale>(0.9,0.9)</scale></hulk>
        <fat>   <scale>(0.9,0.9)</scale></fat>

      </wornGraphicData>
      <careIfWornByCorpse>false</careIfWornByCorpse>
      <careIfDamaged>false</careIfDamaged>
      <wearPerDay>0</wearPerDay>
      <bodyPartGroups>
        <li>Waist</li>
      </bodyPartGroups>
      <layers>
        <li>Belt</li>
      </layers>
      <tags>
        <li>GrenadeNonDestructiveBelt</li>
      </tags>
    </apparel>
  </ThingDef>
  
      </value> 
    </nomatch>	  
    </match>
  </Operation>

</Patch>